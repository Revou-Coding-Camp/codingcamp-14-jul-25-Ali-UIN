<!DOCTYPE html>
<html>
  <head>
    <title>Debug Test</title>
  </head>
  <body>
    <h1>Debug Test - Date Picker</h1>

    <form id="testForm">
      <label for="testBirthdate">Test Tanggal Lahir:</label>
      <input type="date" id="testBirthdate" name="testBirthdate" />
      <br /><br />
      <button type="button" onclick="testUpdate()">Test Update</button>
    </form>

    <div id="testDisplay">
      <h2>Display:</h2>
      <p>Tanggal: <span id="testDisplayBirthdate">-</span></p>
    </div>

    <script>
      function testUpdate() {
        const input = document.getElementById("testBirthdate");
        const display = document.getElementById("testDisplayBirthdate");

        console.log("Input value:", input.value);
        console.log("Display element:", display);

        if (input.value) {
          const date = new Date(input.value);
          // Add one day to fix timezone issues
          date.setDate(date.getDate() + 1);

          // Format manually to ensure dd/mm/yyyy
          const day = String(date.getDate()).padStart(2, "0");
          const month = String(date.getMonth() + 1).padStart(2, "0");
          const year = date.getFullYear();

          const formatted = `${day}/${month}/${year}`;
          console.log("Formatted date (dd/mm/yyyy):", formatted);
          display.textContent = formatted;
          console.log("Display updated to:", display.textContent);
        }
      }

      // Auto test on change
      document
        .getElementById("testBirthdate")
        .addEventListener("change", testUpdate);
    </script>
  </body>
</html>
